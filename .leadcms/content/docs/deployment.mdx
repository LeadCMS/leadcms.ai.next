---
type: doc
title: Deployment
description: Learn how to deploy your LeadCMS site to production with various hosting providers and platforms.
group: Guides
order: 1
---

# Deployment

This guide covers deploying your LeadCMS site to various hosting platforms and production environments.

## Pre-Deployment Checklist

Before deploying, ensure you have:

<Steps>
  <Step title="Production Build">
    Test your production build locally:
    ```bash
    npm run build
    npm run start
    ```
  </Step>
  <Step title="Environment Variables">
    Set up production environment variables with your hosting provider.
  </Step>
  <Step title="Content Review">
    Ensure all content is published and ready for production.
  </Step>
  <Step title="Performance Check">
    Run performance audits using tools like Lighthouse.
  </Step>
</Steps>

## Vercel (Recommended)

Vercel provides excellent Next.js support and seamless deployment:

<Steps>
  <Step title="Install Vercel CLI">
    ```bash
    npm install -g vercel
    ```
  </Step>
  <Step title="Deploy">
    ```bash
    vercel
    ```
    Follow the prompts to link your project.
  </Step>
  <Step title="Configure Environment Variables">
    In your Vercel dashboard, add:
    - `LEADCMS_API_KEY`
    - `LEADCMS_PROJECT_ID`
    - `LEADCMS_ENVIRONMENT=production`
  </Step>
</Steps>

### Vercel Configuration

Create `vercel.json` for advanced configuration:

```json
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "installCommand": "npm install",
  "functions": {
    "pages/api/**/*.js": {
      "memory": 1024
    }
  },
  "headers": [
    {
      "source": "/images/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
```

<Callout type="tip" title="Automatic Deployments">
Connect your Git repository to Vercel for automatic deployments on every push to your main branch.
</Callout>

## Netlify

Deploy to Netlify with continuous deployment:

<Steps>
  <Step title="Connect Repository">
    Link your Git repository in the Netlify dashboard.
  </Step>
  <Step title="Configure Build Settings">
    - Build command: `npm run build`
    - Publish directory: `.next` (for Next.js)
  </Step>
  <Step title="Environment Variables">
    Add your LeadCMS environment variables in Netlify's settings.
  </Step>
</Steps>

### Netlify Configuration

Create `netlify.toml`:

```toml
[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "18"

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

[[headers]]
  for = "/images/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
```

## AWS (Amazon Web Services)

Deploy to AWS using various services:

### AWS Amplify

<Steps>
  <Step title="Install Amplify CLI">
    ```bash
    npm install -g @aws-amplify/cli
    amplify configure
    ```
  </Step>
  <Step title="Initialize Amplify">
    ```bash
    amplify init
    ```
  </Step>
  <Step title="Add Hosting">
    ```bash
    amplify add hosting
    # Choose CloudFront and S3
    ```
  </Step>
  <Step title="Deploy">
    ```bash
    amplify publish
    ```
  </Step>
</Steps>

### AWS S3 + CloudFront

For static exports:

<Steps>
  <Step title="Configure Next.js for Static Export">
    ```javascript
    // next.config.js
    /** @type {import('next').NextConfig} */
    const nextConfig = {
      output: 'export',
      trailingSlash: true,
      images: {
        unoptimized: true
      }
    }

    module.exports = nextConfig
    ```
  </Step>
  <Step title="Build and Export">
    ```bash
    npm run build
    ```
  </Step>
  <Step title="Deploy to S3">
    ```bash
    aws s3 sync out/ s3://your-bucket-name --delete
    ```
  </Step>
</Steps>

## Google Cloud Platform

Deploy using Google Cloud Run:

<Steps>
  <Step title="Create Dockerfile">
    ```dockerfile
    FROM node:18-alpine

    WORKDIR /app
    COPY package*.json ./
    RUN npm ci --only=production

    COPY . .
    RUN npm run build

    EXPOSE 3000
    CMD ["npm", "start"]
    ```
  </Step>
  <Step title="Build and Deploy">
    ```bash
    # Build the container
    gcloud builds submit --tag gcr.io/PROJECT_ID/leadcms-app

    # Deploy to Cloud Run
    gcloud run deploy leadcms-app \
      --image gcr.io/PROJECT_ID/leadcms-app \
      --platform managed \
      --region us-central1 \
      --allow-unauthenticated
    ```
  </Step>
</Steps>

## DigitalOcean

Deploy using DigitalOcean App Platform:

<Steps>
  <Step title="Create App">
    Connect your repository in the DigitalOcean dashboard.
  </Step>
  <Step title="Configure Build">
    - Build command: `npm run build`
    - Run command: `npm start`
  </Step>
  <Step title="Environment Variables">
    Add your LeadCMS configuration in the app settings.
  </Step>
</Steps>

## Docker Deployment

For containerized deployment:

### Docker Compose

```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - LEADCMS_API_KEY=${LEADCMS_API_KEY}
      - LEADCMS_PROJECT_ID=${LEADCMS_PROJECT_ID}
      - LEADCMS_ENVIRONMENT=production
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - app
    restart: unless-stopped
```

### Kubernetes

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: leadcms-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: leadcms-app
  template:
    metadata:
      labels:
        app: leadcms-app
    spec:
      containers:
      - name: leadcms-app
        image: your-registry/leadcms-app:latest
        ports:
        - containerPort: 3000
        env:
        - name: LEADCMS_API_KEY
          valueFrom:
            secretKeyRef:
              name: leadcms-secrets
              key: api-key
        - name: LEADCMS_PROJECT_ID
          value: "your-project-id"
---
apiVersion: v1
kind: Service
metadata:
  name: leadcms-service
spec:
  selector:
    app: leadcms-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 3000
  type: LoadBalancer
```

## Performance Optimization

### Caching Strategy

<Tabs items={[
  {
    label: "CDN",
    value: "cdn",
    content: (
      <div>
        <p>Configure your CDN for optimal caching:</p>
        <CodeBlock language="nginx">
{`# Static assets - long cache
location ~* \.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

# HTML - short cache
location ~* \.(html)$ {
    expires 5m;
    add_header Cache-Control "public, must-revalidate";
}`}
        </CodeBlock>
      </div>
    )
  },
  {
    label: "Next.js",
    value: "nextjs",
    content: (
      <div>
        <p>Configure Next.js caching:</p>
        <CodeBlock language="javascript">
{`// next.config.js
module.exports = {
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          }
        ],
      },
    ]
  },
}`}
        </CodeBlock>
      </div>
    )
  }
]} />

### Image Optimization

Configure image optimization for better performance:

```javascript
// next.config.js
module.exports = {
  images: {
    domains: ['cdn.leadcms.io'],
    formats: ['image/avif', 'image/webp'],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  }
}
```

## Monitoring and Analytics

### Error Tracking

Set up error tracking with Sentry:

```bash
npm install @sentry/nextjs
```

```javascript
// sentry.client.config.js
import * as Sentry from '@sentry/nextjs'

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
})
```

### Performance Monitoring

<Callout type="info" title="Monitoring Tools">
Consider using these tools for production monitoring:
- **Vercel Analytics** - Built-in analytics for Vercel deployments
- **Google Analytics** - Web traffic analysis
- **Sentry** - Error tracking and performance monitoring
- **LogRocket** - Session replay and debugging
</Callout>

## Security Considerations

### Environment Variables

<Callout type="warning" title="Security Best Practices">
- Never commit sensitive environment variables
- Use different API keys for development and production
- Regularly rotate API keys
- Implement proper CORS policies
- Use HTTPS in production
</Callout>

### Headers

Configure security headers:

```javascript
// next.config.js
module.exports = {
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'Content-Security-Policy',
            value: "default-src 'self'; img-src 'self' data: https:;",
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
        ],
      },
    ]
  },
}
```

## Troubleshooting Deployment

### Common Issues

**Build Failures:**
- Check Node.js version compatibility
- Verify all environment variables are set
- Review build logs for specific errors

**Runtime Errors:**
- Ensure API endpoints are accessible
- Check CORS configuration
- Verify SSL certificates

**Performance Issues:**
- Enable compression (gzip/brotli)
- Optimize images and assets
- Implement proper caching strategies

### Deployment Checklist

Before going live:

- [ ] Production build works locally
- [ ] All environment variables configured
- [ ] SSL certificate installed
- [ ] Custom domain configured
- [ ] Analytics and monitoring set up
- [ ] Error tracking enabled
- [ ] Performance optimization implemented
- [ ] Security headers configured
- [ ] Backup strategy in place

## Next Steps

After successful deployment:

<FeatureGrid columns={2}>
  <FeatureCard
    title="Monitoring"
    description="Set up monitoring and alerting for your production site"
    href="/docs/monitoring"
  />
  <FeatureCard
    title="Optimization"
    description="Learn advanced optimization techniques"
    href="/docs/optimization"
  />
  <FeatureCard
    title="Scaling"
    description="Scale your application for high traffic"
    href="/docs/scaling"
  />
  <FeatureCard
    title="Maintenance"
    description="Best practices for maintaining your production site"
    href="/docs/maintenance"
  />
</FeatureGrid>
